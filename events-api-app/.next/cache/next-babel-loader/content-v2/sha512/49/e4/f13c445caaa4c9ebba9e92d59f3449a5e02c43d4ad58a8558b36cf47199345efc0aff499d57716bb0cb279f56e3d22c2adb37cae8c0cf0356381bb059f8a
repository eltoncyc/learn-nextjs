{"ast":null,"code":"function handler(req, res) {\n  const eventId = req.query.eventId;\n\n  if (req.method === 'POST') {\n    const {\n      email,\n      name,\n      text\n    } = req.body; //add server side validation\n\n    if (!email.includes('@') || !name || name.trim() === '' || !text || text.trim() === '') {\n      res.status(422).json({\n        message: 'Invalid Input.'\n      });\n      return;\n    }\n\n    console.log(email, name, text);\n    const newComment = {\n      id: new Date().toISOString(),\n      email,\n      name,\n      text\n    };\n    console.log(newComment);\n    res.status(201).json({\n      message: 'Added comment.',\n      comment: newComment\n    });\n  }\n\n  if (req.method === 'GET') {\n    const dummyList = [{\n      id: 'c1',\n      name: 'Elton',\n      text: 'first comment.'\n    }, {\n      id: 'c2',\n      name: 'EltonC',\n      text: 'second comment.'\n    }];\n    res.status(200).json({\n      comments: dummyList\n    });\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["D:/Projects/learn-nextjs/events-api-app/pages/api/comments/[eventId].js"],"names":["handler","req","res","eventId","query","method","email","name","text","body","includes","trim","status","json","message","console","log","newComment","id","Date","toISOString","comment","dummyList","comments"],"mappings":"AACA,SAASA,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA0B;AAGtB,QAAMC,OAAO,GAAGF,GAAG,CAACG,KAAJ,CAAUD,OAA1B;;AAGA,MAAGF,GAAG,CAACI,MAAJ,KAAa,MAAhB,EAAuB;AACnB,UAAM;AAACC,MAAAA,KAAD;AAAQC,MAAAA,IAAR;AAAcC,MAAAA;AAAd,QAAsBP,GAAG,CAACQ,IAAhC,CADmB,CAEnB;;AACA,QAAG,CAACH,KAAK,CAACI,QAAN,CAAe,GAAf,CAAD,IACA,CAACH,IADD,IACSA,IAAI,CAACI,IAAL,OAAc,EADvB,IAED,CAACH,IAFA,IAEMA,IAAI,CAACG,IAAL,OAAc,EAFvB,EAE0B;AACtBT,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAC;AAAT,OAArB;AACA;AACH;;AAEDC,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ,EAAmBC,IAAnB,EAAyBC,IAAzB;AACA,UAAMS,UAAU,GAAG;AACfC,MAAAA,EAAE,EAAC,IAAIC,IAAJ,GAAWC,WAAX,EADY;AAEfd,MAAAA,KAFe;AAGfC,MAAAA,IAHe;AAIfC,MAAAA;AAJe,KAAnB;AAMAO,IAAAA,OAAO,CAACC,GAAR,CAAYC,UAAZ;AACAf,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,OAAO,EAAC,gBAAT;AAA0BO,MAAAA,OAAO,EAACJ;AAAlC,KAArB;AACH;;AAED,MAAGhB,GAAG,CAACI,MAAJ,KAAa,KAAhB,EAAsB;AAClB,UAAMiB,SAAS,GAAG,CACd;AAACJ,MAAAA,EAAE,EAAC,IAAJ;AAAUX,MAAAA,IAAI,EAAC,OAAf;AAAwBC,MAAAA,IAAI,EAAC;AAA7B,KADc,EAEd;AAACU,MAAAA,EAAE,EAAC,IAAJ;AAAUX,MAAAA,IAAI,EAAC,QAAf;AAAyBC,MAAAA,IAAI,EAAC;AAA9B,KAFc,CAAlB;AAIAN,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACU,MAAAA,QAAQ,EAACD;AAAV,KAArB;AACH;AACJ;;AAED,eAAetB,OAAf","sourcesContent":["\r\nfunction handler(req, res){\r\n\r\n\r\n    const eventId = req.query.eventId;\r\n\r\n\r\n    if(req.method==='POST'){\r\n        const {email, name, text} = req.body;\r\n        //add server side validation\r\n        if(!email.includes('@')\r\n        || !name || name.trim()===''\r\n        ||!text||text.trim()===''){\r\n            res.status(422).json({message:'Invalid Input.'});\r\n            return;\r\n        }\r\n\r\n        console.log(email, name, text);\r\n        const newComment = {\r\n            id:new Date().toISOString(),\r\n            email,\r\n            name,\r\n            text\r\n        }\r\n        console.log(newComment);\r\n        res.status(201).json({message:'Added comment.',comment:newComment});\r\n    }\r\n\r\n    if(req.method==='GET'){\r\n        const dummyList = [\r\n            {id:'c1', name:'Elton', text:'first comment.'},\r\n            {id:'c2', name:'EltonC', text:'second comment.'}\r\n        ];\r\n        res.status(200).json({comments:dummyList});\r\n    }\r\n}\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}