{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Projects\\\\learn-nextjs\\\\events-api-app\\\\components\\\\input\\\\newsletter-registration.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useRef } from 'react';\nimport classes from './newsletter-registration.module.css';\nimport NotificationContext from '../../store/notification-context';\n\nfunction NewsletterRegistration() {\n  _s();\n\n  var emailInputRef = useRef();\n  var notificationCtx = useContext(NotificationContext);\n\n  function registrationHandler(event) {\n    event.preventDefault();\n    var enteredEmail = emailInputRef.current.value;\n    notificationCtx.showNotification({\n      title: 'Signing up...',\n      message: 'Registering for newsletter.',\n      status: 'pending'\n    });\n    fetch('/api/newsletter', {\n      method: 'POST',\n      body: JSON.stringify({\n        email: enteredEmail\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(function (data) {\n        throw new Error(data.message || 'Something went wrong!');\n      });\n    }).then(function (data) {\n      notificationCtx.showNotification({\n        title: 'Success',\n        message: 'Successfully registered for newsletter!',\n        status: 'success'\n      });\n    })[\"catch\"](function (error) {\n      notificationCtx.showNotification({\n        title: 'Error',\n        message: error.message || 'Somthing went wrong!',\n        status: 'error'\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.newsletter,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Sign up to stay updated!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: registrationHandler,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          placeholder: \"Your email\",\n          \"aria-label\": \"Your email\",\n          ref: emailInputRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewsletterRegistration, \"DPwtQQ/gldp2MEe6QW3mx9/oYa8=\");\n\n_c = NewsletterRegistration;\nexport default NewsletterRegistration;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewsletterRegistration\");","map":{"version":3,"sources":["D:/Projects/learn-nextjs/events-api-app/components/input/newsletter-registration.js"],"names":["useContext","useRef","classes","NotificationContext","NewsletterRegistration","emailInputRef","notificationCtx","registrationHandler","event","preventDefault","enteredEmail","current","value","showNotification","title","message","status","fetch","method","body","JSON","stringify","email","headers","then","response","ok","json","data","Error","error","newsletter","control"],"mappings":";;;;;AAAA,SAASA,UAAT,EAAqBC,MAArB,QAAmC,OAAnC;AACA,OAAOC,OAAP,MAAoB,sCAApB;AACA,OAAOC,mBAAP,MAAgC,kCAAhC;;AAEA,SAASC,sBAAT,GAAkC;AAAA;;AAChC,MAAMC,aAAa,GAAGJ,MAAM,EAA5B;AACA,MAAMK,eAAe,GAAGN,UAAU,CAACG,mBAAD,CAAlC;;AAEA,WAASI,mBAAT,CAA6BC,KAA7B,EAAoC;AAClCA,IAAAA,KAAK,CAACC,cAAN;AAEA,QAAMC,YAAY,GAAGL,aAAa,CAACM,OAAd,CAAsBC,KAA3C;AACAN,IAAAA,eAAe,CAACO,gBAAhB,CAAiC;AAC/BC,MAAAA,KAAK,EAAC,eADyB;AAE/BC,MAAAA,OAAO,EAAE,6BAFsB;AAG/BC,MAAAA,MAAM,EAAC;AAHwB,KAAjC;AAKAC,IAAAA,KAAK,CAAC,iBAAD,EAAoB;AACvBC,MAAAA,MAAM,EAAC,MADgB;AAEvBC,MAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,KAAK,EAAEZ;AAAR,OAAf,CAFkB;AAGvBa,MAAAA,OAAO,EAAC;AACN,wBAAe;AADT;AAHe,KAApB,CAAL,CAMGC,IANH,CAMQ,UAAAC,QAAQ,EAAE;AAChB,UAAGA,QAAQ,CAACC,EAAZ,EAAe;AACb,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACD;;AACD,aAAOF,QAAQ,CAACE,IAAT,GAAgBH,IAAhB,CAAqB,UAAAI,IAAI,EAAE;AAChC,cAAM,IAAIC,KAAJ,CAAUD,IAAI,CAACb,OAAL,IAAc,uBAAxB,CAAN;AACD,OAFM,CAAP;AAGD,KAbD,EAcCS,IAdD,CAcM,UAACI,IAAD,EAAQ;AACZtB,MAAAA,eAAe,CAACO,gBAAhB,CAAiC;AAC/BC,QAAAA,KAAK,EAAC,SADyB;AAE/BC,QAAAA,OAAO,EAAE,yCAFsB;AAG/BC,QAAAA,MAAM,EAAC;AAHwB,OAAjC;AAKD,KApBD,WAoBS,UAAAc,KAAK,EAAE;AACdxB,MAAAA,eAAe,CAACO,gBAAhB,CAAiC;AAC/BC,QAAAA,KAAK,EAAC,OADyB;AAE/BC,QAAAA,OAAO,EAAEe,KAAK,CAACf,OAAN,IAAe,sBAFO;AAG/BC,QAAAA,MAAM,EAAC;AAHwB,OAAjC;AAKD,KA1BD;AA4BD;;AAED,sBACE;AAAS,IAAA,SAAS,EAAEd,OAAO,CAAC6B,UAA5B;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAM,MAAA,QAAQ,EAAExB,mBAAhB;AAAA,6BACE;AAAK,QAAA,SAAS,EAAEL,OAAO,CAAC8B,OAAxB;AAAA,gCACE;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,EAAE,EAAC,OAFL;AAGE,UAAA,WAAW,EAAC,YAHd;AAIE,wBAAW,YAJb;AAKE,UAAA,GAAG,EAAE3B;AALP;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAiBD;;GA5DQD,sB;;KAAAA,sB;AA8DT,eAAeA,sBAAf","sourcesContent":["import { useContext, useRef } from 'react';\nimport classes from './newsletter-registration.module.css';\nimport NotificationContext from '../../store/notification-context';\n\nfunction NewsletterRegistration() {\n  const emailInputRef = useRef();\n  const notificationCtx = useContext(NotificationContext);\n\n  function registrationHandler(event) {\n    event.preventDefault();\n\n    const enteredEmail = emailInputRef.current.value;\n    notificationCtx.showNotification({\n      title:'Signing up...',\n      message: 'Registering for newsletter.',\n      status:'pending'\n    })\n    fetch('/api/newsletter', {\n      method:'POST',\n      body:JSON.stringify({email: enteredEmail}),\n      headers:{\n        'Content-Type':'application/json',\n      }\n    }).then(response=>{\n      if(response.ok){\n        return response.json();\n      }\n      return response.json().then(data=>{\n        throw new Error(data.message||'Something went wrong!');\n      })\n    })\n    .then((data)=>{\n      notificationCtx.showNotification({\n        title:'Success',\n        message: 'Successfully registered for newsletter!',\n        status:'success'\n      })\n    }).catch(error=>{\n      notificationCtx.showNotification({\n        title:'Error',\n        message: error.message||'Somthing went wrong!',\n        status:'error'\n      })\n    });\n\n  }\n\n  return (\n    <section className={classes.newsletter}>\n      <h2>Sign up to stay updated!</h2>\n      <form onSubmit={registrationHandler}>\n        <div className={classes.control}>\n          <input\n            type='email'\n            id='email'\n            placeholder='Your email'\n            aria-label='Your email'\n            ref={emailInputRef}\n          />\n          <button>Register</button>\n        </div>\n      </form>\n    </section>\n  );\n}\n\nexport default NewsletterRegistration;\n"]},"metadata":{},"sourceType":"module"}