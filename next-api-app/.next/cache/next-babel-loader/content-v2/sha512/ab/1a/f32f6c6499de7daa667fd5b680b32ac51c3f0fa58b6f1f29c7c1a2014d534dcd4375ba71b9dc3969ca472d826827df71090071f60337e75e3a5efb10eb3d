{"ast":null,"code":"import fs from 'fs';\nimport path from 'path';\n\nfunction handler(req, res) {\n  if (req.method === 'POST') {\n    const email = req.body.email;\n    const feedbackText = req.body.text;\n    const newFeedBack = {\n      id: new Date().toISOString(),\n      email: email,\n      text: feedbackText\n    }; //store that in a database\n\n    const filePath = buildFeedbackPath();\n    const data = extractFeedback(filePath);\n    data.push(newFeedback);\n    fs.writeFileSync(filePath, JSON.stringify(data));\n    res.status(201).json({\n      message: 'Success!',\n      feedback: newFeedback\n    });\n  } else {\n    res.status(200).json({\n      message: 'This works!'\n    });\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["D:/Projects/learn-nextjs/next-api-app/pages/api/feedback.js"],"names":["fs","path","handler","req","res","method","email","body","feedbackText","text","newFeedBack","id","Date","toISOString","filePath","buildFeedbackPath","data","extractFeedback","push","newFeedback","writeFileSync","JSON","stringify","status","json","message","feedback"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;;AAEA,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA0B;AAEtB,MAAGD,GAAG,CAACE,MAAJ,KAAe,MAAlB,EAAyB;AACrB,UAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAAvB;AACA,UAAME,YAAY,GAAGL,GAAG,CAACI,IAAJ,CAASE,IAA9B;AAEA,UAAMC,WAAW,GAAG;AAChBC,MAAAA,EAAE,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EADY;AAEhBP,MAAAA,KAAK,EAACA,KAFU;AAGhBG,MAAAA,IAAI,EAACD;AAHW,KAApB,CAJqB,CAUrB;;AACA,UAAMM,QAAQ,GAAGC,iBAAiB,EAAlC;AACJ,UAAMC,IAAI,GAAGC,eAAe,CAACH,QAAD,CAA5B;AACAE,IAAAA,IAAI,CAACE,IAAL,CAAUC,WAAV;AACAnB,IAAAA,EAAE,CAACoB,aAAH,CAAiBN,QAAjB,EAA2BO,IAAI,CAACC,SAAL,CAAeN,IAAf,CAA3B;AACAZ,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE,UAAX;AAAuBC,MAAAA,QAAQ,EAAEP;AAAjC,KAArB;AACC,GAhBD,MAgBK;AACDf,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBC,MAAAA,OAAO,EAAC;AADS,KAArB;AAGH;AAGJ;;AAED,eAAevB,OAAf","sourcesContent":["import fs from 'fs';\r\nimport path from 'path'\r\n\r\nfunction handler(req, res){\r\n\r\n    if(req.method === 'POST'){\r\n        const email = req.body.email;\r\n        const feedbackText = req.body.text;\r\n\r\n        const newFeedBack = {\r\n            id: new Date().toISOString(),\r\n            email:email,\r\n            text:feedbackText\r\n        };\r\n        \r\n        //store that in a database\r\n        const filePath = buildFeedbackPath();\r\n    const data = extractFeedback(filePath);\r\n    data.push(newFeedback);\r\n    fs.writeFileSync(filePath, JSON.stringify(data));\r\n    res.status(201).json({ message: 'Success!', feedback: newFeedback });\r\n    }else{\r\n        res.status(200).json({\r\n            message:'This works!'\r\n        });\r\n    }\r\n\r\n    \r\n}\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}