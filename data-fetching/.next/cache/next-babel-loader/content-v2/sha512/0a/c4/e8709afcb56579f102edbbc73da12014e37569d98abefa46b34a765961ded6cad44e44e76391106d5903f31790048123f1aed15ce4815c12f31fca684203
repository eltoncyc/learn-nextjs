{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Projects\\\\learn-nextjs\\\\data-fetching\\\\pages\\\\last-sales.js\",\n    _s = $RefreshSig$();\n\n// client side data fetching\n// useEffect - fetch()\n// useSWR\n// combining pre-fetching with client side fetching\nimport { useEffect, useState } from \"react\";\nimport useSWR from 'swr';\n\nfunction LastSalesPage() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(),\n      sales = _useState[0],\n      setSales = _useState[1]; // const [isLoading, setIsLoading] = useState(false);\n\n\n  var _useSWR = useSWR('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json'),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  useEffect(function () {\n    if (data) {\n      var transformedSales = [];\n\n      for (var key in data) {\n        transformedSales.push({\n          id: key,\n          username: data[key].username,\n          volume: data[key].volume\n        });\n      }\n\n      setSales(transformedSales);\n    }\n  }, [data]); // useEffect(()=>{},[]);\n  // useEffect(()=>{\n  //     setIsLoading(true);\n  //     fetch('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json'\n  //     ).then((response)=>response.json())\n  //     .then(data=>{\n  //         const transformedSales = [];\n  //         for (const key in data){\n  //             transformedSales.push({id:key, \n  //                 username:data[key].username, \n  //                 volume:data[key].volume})\n  //         }\n  //         setSales(transformedSales);\n  //         setIsLoading(false);\n  //     });\n  // }, []);\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"failed to load\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (!data) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (!sales) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: sales.map(function (sale) {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [sale.username, \" - $\", sale.volume]\n      }, sale.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 26\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 12\n  }, this);\n}\n\n_s(LastSalesPage, \"c+X+bUeHHb7DD9DeEt3gLkugrDk=\", false, function () {\n  return [useSWR];\n});\n\n_c = LastSalesPage;\nexport default LastSalesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LastSalesPage\");","map":{"version":3,"sources":["D:/Projects/learn-nextjs/data-fetching/pages/last-sales.js"],"names":["useEffect","useState","useSWR","LastSalesPage","sales","setSales","data","error","transformedSales","key","push","id","username","volume","map","sale"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,KAAnB;;AAEA,SAASC,aAAT,GAAwB;AAAA;;AAAA;;AAAA,kBACMF,QAAQ,EADd;AAAA,MACbG,KADa;AAAA,MACNC,QADM,iBAEpB;;;AAFoB,gBAIEH,MAAM,CAAC,oEAAD,CAJR;AAAA,MAIbI,IAJa,WAIbA,IAJa;AAAA,MAIPC,KAJO,WAIPA,KAJO;;AAMpBP,EAAAA,SAAS,CAAC,YAAI;AACV,QAAGM,IAAH,EAAQ;AACJ,UAAME,gBAAgB,GAAG,EAAzB;;AACA,WAAK,IAAMC,GAAX,IAAkBH,IAAlB,EAAuB;AACnBE,QAAAA,gBAAgB,CAACE,IAAjB,CAAsB;AAACC,UAAAA,EAAE,EAACF,GAAJ;AAClBG,UAAAA,QAAQ,EAACN,IAAI,CAACG,GAAD,CAAJ,CAAUG,QADD;AAElBC,UAAAA,MAAM,EAACP,IAAI,CAACG,GAAD,CAAJ,CAAUI;AAFC,SAAtB;AAGH;;AAEDR,MAAAA,QAAQ,CAACG,gBAAD,CAAR;AACH;AACJ,GAXQ,EAWN,CAACF,IAAD,CAXM,CAAT,CANoB,CAoBpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,MAAGC,KAAH,EAAS;AACL,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,MAAG,CAACD,IAAJ,EAAS;AACL,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,MAAG,CAACF,KAAJ,EAAU;AACN,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,sBAAO;AAAA,cACFA,KAAK,CAACU,GAAN,CAAU,UAAAC,IAAI;AAAA,0BAAE;AAAA,mBAChBA,IAAI,CAACH,QADW,UACGG,IAAI,CAACF,MADR;AAAA,SAAWE,IAAI,CAACJ,EAAhB;AAAA;AAAA;AAAA;AAAA,eAAF;AAAA,KAAd;AADE;AAAA;AAAA;AAAA;AAAA,UAAP;AAIH;;GAtDQR,a;UAIiBD,M;;;KAJjBC,a;AAwDT,eAAeA,aAAf","sourcesContent":["// client side data fetching\r\n// useEffect - fetch()\r\n// useSWR\r\n// combining pre-fetching with client side fetching\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport useSWR from 'swr';\r\n\r\nfunction LastSalesPage(){\r\n    const [sales, setSales] = useState();\r\n    // const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const {data, error} = useSWR('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json');\r\n\r\n    useEffect(()=>{\r\n        if(data){\r\n            const transformedSales = [];\r\n            for (const key in data){\r\n                transformedSales.push({id:key, \r\n                    username:data[key].username, \r\n                    volume:data[key].volume})\r\n            }\r\n\r\n            setSales(transformedSales);\r\n        }\r\n    }, [data])\r\n\r\n\r\n    // useEffect(()=>{},[]);\r\n    // useEffect(()=>{\r\n    //     setIsLoading(true);\r\n    //     fetch('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json'\r\n    //     ).then((response)=>response.json())\r\n    //     .then(data=>{\r\n    //         const transformedSales = [];\r\n    //         for (const key in data){\r\n    //             transformedSales.push({id:key, \r\n    //                 username:data[key].username, \r\n    //                 volume:data[key].volume})\r\n    //         }\r\n    //         setSales(transformedSales);\r\n    //         setIsLoading(false);\r\n    //     });\r\n\r\n    // }, []);\r\n\r\n    if(error){\r\n        return <p>failed to load</p>\r\n    }\r\n\r\n    if(!data){\r\n        return <p>Loading...</p>\r\n    }\r\n\r\n    if(!sales){\r\n        return <p>loading...</p>\r\n    }\r\n\r\n    return <ul>\r\n        {sales.map(sale=><li key = {sale.id}>\r\n        {sale.username} - ${sale.volume}</li>)}\r\n    </ul>\r\n}\r\n\r\nexport default LastSalesPage;"]},"metadata":{},"sourceType":"module"}