{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Projects\\\\learn-nextjs\\\\data-fetching\\\\pages\\\\last-sales.js\",\n    _s = $RefreshSig$();\n\n// client side data fetching\n// useEffect - fetch()\n// useSWR\n// combining pre-fetching with client side fetching\nimport { useEffect, useState } from \"react\";\nimport useSWR from 'swr';\n\nfunction LastSalesPage(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(props.sales),\n      sales = _useState[0],\n      setSales = _useState[1]; // const [isLoading, setIsLoading] = useState(false);\n\n\n  var _useSWR = useSWR('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json'),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  useEffect(function () {\n    if (data) {\n      var transformedSales = [];\n\n      for (var key in data) {\n        transformedSales.push({\n          id: key,\n          username: data[key].username,\n          volume: data[key].volume\n        });\n      }\n\n      setSales(transformedSales);\n    }\n  }, [data]); // useEffect(()=>{},[]);\n  // useEffect(()=>{\n  //     setIsLoading(true);\n  //     fetch('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json'\n  //     ).then((response)=>response.json())\n  //     .then(data=>{\n  //         const transformedSales = [];\n  //         for (const key in data){\n  //             transformedSales.push({id:key, \n  //                 username:data[key].username, \n  //                 volume:data[key].volume})\n  //         }\n  //         setSales(transformedSales);\n  //         setIsLoading(false);\n  //     });\n  // }, []);\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"failed to load\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (!data && !sales) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: sales.map(function (sale) {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [sale.username, \" - $\", sale.volume]\n      }, sale.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 26\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 12\n  }, this);\n}\n\n_s(LastSalesPage, \"shvM6MHhBRL/BOoAQa6GnPsqpoM=\", false, function () {\n  return [useSWR];\n});\n\n_c = LastSalesPage;\nexport var __N_SSG = true;\nexport default LastSalesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LastSalesPage\");","map":{"version":3,"sources":["D:/Projects/learn-nextjs/data-fetching/pages/last-sales.js"],"names":["useEffect","useState","useSWR","LastSalesPage","props","sales","setSales","data","error","transformedSales","key","push","id","username","volume","map","sale"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,KAAnB;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA6B;AAAA;;AAAA;;AAAA,kBACCH,QAAQ,CAACG,KAAK,CAACC,KAAP,CADT;AAAA,MAClBA,KADkB;AAAA,MACXC,QADW,iBAEzB;;;AAFyB,gBAIHJ,MAAM,CAAC,oEAAD,CAJH;AAAA,MAIlBK,IAJkB,WAIlBA,IAJkB;AAAA,MAIZC,KAJY,WAIZA,KAJY;;AAMzBR,EAAAA,SAAS,CAAC,YAAI;AACV,QAAGO,IAAH,EAAQ;AACJ,UAAME,gBAAgB,GAAG,EAAzB;;AACA,WAAK,IAAMC,GAAX,IAAkBH,IAAlB,EAAuB;AACnBE,QAAAA,gBAAgB,CAACE,IAAjB,CAAsB;AAACC,UAAAA,EAAE,EAACF,GAAJ;AAClBG,UAAAA,QAAQ,EAACN,IAAI,CAACG,GAAD,CAAJ,CAAUG,QADD;AAElBC,UAAAA,MAAM,EAACP,IAAI,CAACG,GAAD,CAAJ,CAAUI;AAFC,SAAtB;AAGH;;AAEDR,MAAAA,QAAQ,CAACG,gBAAD,CAAR;AACH;AACJ,GAXQ,EAWN,CAACF,IAAD,CAXM,CAAT,CANyB,CAoBzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,MAAGC,KAAH,EAAS;AACL,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,MAAG,CAACD,IAAD,IAAS,CAACF,KAAb,EAAmB;AACf,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAGD,sBAAO;AAAA,cACFA,KAAK,CAACU,GAAN,CAAU,UAAAC,IAAI;AAAA,0BAAE;AAAA,mBAChBA,IAAI,CAACH,QADW,UACGG,IAAI,CAACF,MADR;AAAA,SAAWE,IAAI,CAACJ,EAAhB;AAAA;AAAA;AAAA;AAAA,eAAF;AAAA,KAAd;AADE;AAAA;AAAA;AAAA;AAAA,UAAP;AAIH;;GAnDQT,a;UAIiBD,M;;;KAJjBC,a;;AAwET,eAAeA,aAAf","sourcesContent":["// client side data fetching\r\n// useEffect - fetch()\r\n// useSWR\r\n// combining pre-fetching with client side fetching\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport useSWR from 'swr';\r\n\r\nfunction LastSalesPage(props){\r\n    const [sales, setSales] = useState(props.sales);\r\n    // const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const {data, error} = useSWR('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json');\r\n\r\n    useEffect(()=>{\r\n        if(data){\r\n            const transformedSales = [];\r\n            for (const key in data){\r\n                transformedSales.push({id:key, \r\n                    username:data[key].username, \r\n                    volume:data[key].volume})\r\n            }\r\n\r\n            setSales(transformedSales);\r\n        }\r\n    }, [data])\r\n\r\n\r\n    // useEffect(()=>{},[]);\r\n    // useEffect(()=>{\r\n    //     setIsLoading(true);\r\n    //     fetch('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json'\r\n    //     ).then((response)=>response.json())\r\n    //     .then(data=>{\r\n    //         const transformedSales = [];\r\n    //         for (const key in data){\r\n    //             transformedSales.push({id:key, \r\n    //                 username:data[key].username, \r\n    //                 volume:data[key].volume})\r\n    //         }\r\n    //         setSales(transformedSales);\r\n    //         setIsLoading(false);\r\n    //     });\r\n\r\n    // }, []);\r\n\r\n    if(error){\r\n        return <p>failed to load</p>\r\n    }\r\n\r\n    if(!data && !sales){\r\n        return <p>Loading...</p>\r\n    }\r\n\r\n\r\n    return <ul>\r\n        {sales.map(sale=><li key = {sale.id}>\r\n        {sale.username} - ${sale.volume}</li>)}\r\n    </ul>\r\n}\r\n\r\nexport async function getStaticProps(){\r\n    const response = await fetch('https://nextjs-course-4b290-default-rtdb.firebaseio.com/sales.json')\r\n    const data = await response.json();\r\n\r\n    const transformedSales = [];\r\n    for (const key in data){\r\n        transformedSales.push({\r\n            id:key, \r\n            username:data[key].username, \r\n            volume:data[key].volume})\r\n    }\r\n\r\n    return {\r\n        props:{sales:transformedSales},\r\n        revalidate:10\r\n    };\r\n\r\n}\r\n\r\nexport default LastSalesPage;"]},"metadata":{},"sourceType":"module"}